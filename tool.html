<html><head>
  <title>다용도 개발 보조 도구</title>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; margin: 0; display: flex; flex-direction: column; height: 100vh; background-color: #f3f4f6; }
    #selectViewPage { 
      padding: 1rem 1.5rem; 
      background-color: #fff; 
      border-bottom: 1px solid #e5e7eb; 
      display: flex; 
      flex-wrap: wrap; 
      gap: 1rem;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    #selectViewPage label { 
      cursor: pointer; 
      padding: 0.5rem 1rem; 
      border-radius: 0.375rem; 
      transition: background-color 0.2s, color 0.2s; 
      font-weight: 500;
      color: #374151;
    }
    #selectViewPage input[type="radio"] { display: none; }
    #selectViewPage input[type="radio"]:checked + label { 
      background-color: #111827; 
      color: #ffffff; 
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    #tool-frame { flex-grow: 1; border: none; }
    footer {
      text-align: center;
      padding: 1rem;
      background-color: #fff;
      border-top: 1px solid #e5e7eb;
      font-size: 0.9rem;
      color: #6b7280;
    }
  </style>
</head>

<body>
  <div id="selectViewPage">
    <input type="radio" name="selectView" id="selectClasspath" value="./tools/classpath-tool.html" checked><label for="selectClasspath">Classpath 설정</label>
    <input type="radio" name="selectView" id="selectConfig" value="./tools/config-tool.html"><label for="selectConfig">Config 설정</label>
    <input type="radio" name="selectView" id="selectQueryPage" value="./tools/sql-converter.html"><label for="selectQueryPage">SQL문 변환</label>
    <input type="radio" name="selectView" id="selectCustomerManagement" value="./tools/customer-management-converter.html"><label for="selectCustomerManagement">고객관리 변환</label>
    <input type="radio" name="selectView" id="selectUriEnc" value="./tools/uri-decoder.html"><label for="selectUriEnc">URI디코딩</label>
    <input type="radio" name="selectView" id="selectXmlConvert" value="./tools/xml-converter.html"><label for="selectXmlConvert">xml 변환</label>
    <input type="radio" name="selectView" id="selectMarkdownCleaner" value="./tools/markdown-cleaner.html"><label for="selectMarkdownCleaner">마크다운 변환</label>
  </div>
  <iframe id="tool-frame" src="./tools/classpath-tool.html"></iframe>

  <footer>
    <p>© 2025 Multi-purpose Development Assistant Tools. All rights reserved.</p>
  </footer>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const frame = document.getElementById('tool-frame');
    const radios = document.querySelectorAll('input[name="selectView"]');
    let configObj = {};

    function loadConfig(callback) {
        const oldScript = document.getElementById('config-script');
        if (oldScript) {
            oldScript.remove();
        }

        const script = document.createElement('script');
        script.id = 'config-script';
        script.src = `./config.js?t=${new Date().getTime()}`;

        script.onload = () => {
            console.log('config.js loaded successfully.');
            callback(window.configObj || {});
        };

        script.onerror = () => {
            console.warn('config.js not found. Starting with empty config.');
            callback({});
        };

        document.head.appendChild(script);
    }

    function init() {
        loadConfig(config => {
            configObj = config;
            const checkedRadio = document.querySelector('input[name="selectView"]:checked');
            if (checkedRadio) {
                frame.src = checkedRadio.value;
            }
        });
    }

    frame.addEventListener('load', () => {
        frame.contentWindow.postMessage({ type: 'config-data', data: configObj }, '*');
    });

    radios.forEach(radio => {
      radio.addEventListener('change', (event) => {
        if (event.target.checked) {
          frame.src = event.target.value;
        }
      });
    });

    window.addEventListener('message', (event) => {
        if (event.data.type === 'config-updated') {
            console.log('Config updated, reloading...');
            loadConfig(config => {
                configObj = config;
                frame.contentWindow.postMessage({ type: 'config-data', data: configObj }, '*');
            });
        }
    });

    init();
  });
</script>
</body></html>